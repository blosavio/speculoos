<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>speculoos.collection-functions documentation</title><link rel="stylesheet" type="text/css" href="codox.css" /><link rel="stylesheet" type="text/css" href="highlight.css" /></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Speculoos</span> <span class="project-version">1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1"><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>speculoos</span></div></div></li><li class="depth-2 branch current"><a href="speculoos.collection-functions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>collection-functions</span></div></a></li><li class="depth-2 branch"><a href="speculoos.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="speculoos.fn-in.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fn-in</span></div></a></li><li class="depth-2 branch"><a href="speculoos.function-specs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>function-specs</span></div></a></li><li class="depth-2"><a href="speculoos.utility.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utility</span></div></a></li></ul><h3 class="no-link"><span class="inner">Speculoos Links</span></h3><ul class="index-link"><li class="depth-1 current"><a href="home.html">Home</a></li><li class="depth-1 current"><a href="documentation.html">Documentation</a></li><li class="depth-1 current"><a href="source.html">Source</a></li><li class="depth-1 current"><a href="contact.html">Contact</a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="speculoos.collection-functions.html#var-map-2"><div class="inner"><span>map-2</span></div></a></li><li class="depth-1"><a href="speculoos.collection-functions.html#var-map-indexed-2"><div class="inner"><span>map-indexed-2</span></div></a></li><li class="depth-1"><a href="speculoos.collection-functions.html#var-reduce-2"><div class="inner"><span>reduce-2</span></div></a></li><li class="depth-1"><a href="speculoos.collection-functions.html#var-reduce-indexed"><div class="inner"><span>reduce-indexed</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">speculoos.collection-functions</h1><div class="doc"><div class="markdown"><p>Hacked up versions of <code>map</code> and <code>reduce</code> that attempt to provide a unified interface to processing elements within maps, vectors, lists, sets, and (possibly) non-terminating sequences (i.e., <code>clojure.lang.{Cycle,Iterate,LazySeq,Range}</code>) . These functions use only <code>first</code>, <code>rest</code>, etc., and therefore make no consideration for performance.</p>
<p>Implementations are heavily inspired by their <code>clojure.core</code> counterparts.</p>
</div></div><div class="public anchor" id="var-map-2"><h3>map-2</h3><div class="usage"><code>(map-2 f coll)</code></div><div class="doc"><div class="markdown"><p>Return a sequence by applying function <code>f</code> to each element of collection <code>coll</code>. <code>coll</code> may be any Clojure collection.</p>
<p>Consult <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/map">clojure.core/map</a> docstring for usage. This version accepts only one collection.</p>
<p>Examples:</p>
<pre><code class="language-clojure">(map-2 symbol [:a :b :c]) ;; =&gt; (a b c)
(map-2 identity {:a 1 :b 2 :c 3}) ;; =&gt; ([:a 1] [:b 2] [:c 3])
(map-2 inc (list 1 2 3)) ;; =&gt; (2 3 4)
(map-2 identity #{1 2 3}) ;; =&gt; (1 3 2)
(map-2 - (range 7 10)) ;; =&gt; (-7 -8 -9)

(map-2 inc []) ;; =&gt; []
</code></pre>
<p>Modifications of <a href="https://github.com/clojure/clojure/blob/f85444e6f890eb585e598efefdbd84727427e0a4/src/clj/clojure/core.clj#L1494C1-L1522C56">map version 1.0</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/blosavio/speculoos/blob/main/src/speculoos/collection_functions.clj#L46">view source</a></div></div><div class="public anchor" id="var-map-indexed-2"><h3>map-indexed-2</h3><div class="usage"><code>(map-indexed-2 f coll)</code></div><div class="doc"><div class="markdown"><p>Returns a sequence consisting of the result of applying function <code>f</code> to 0 and the first item of <code>coll</code>, followed by applying <code>f</code> to 1 and the second item in <code>coll</code>, etc. <code>f</code> should accept 2 arguments, index and item. <code>coll</code> may be any Clojure collection.</p>
<p>Consult <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/map-indexed">clojure.core/map-indexed</a> docstring for usage.</p>
<p>Examples:</p>
<pre><code class="language-clojure">(map-indexed-2 #(vector %1 %2) [:a :b :c]) ;; =&gt; ([0 :a] [1 :b] [2 :c])
(map-indexed-2 #(vector %1 %2) {:a 1 :b 2}) ;; =&gt; ([0 [:a 1]] [1 [:b 2]])
(map-indexed-2 #(vector %1 %2) (list 'a :b \c)) ;; ([0 a] [1 :b] [2 \c])
(map-indexed-2 #(vector %1 %2) #{11 22 33}) ;; =&gt; ([0 33] [1 22] [2 11])

(map-indexed-2 (constantly :foo) []) ;; =&gt; []
</code></pre>
<p>Modifications of <a href="https://github.com/clojure/clojure/blob/0436abdb51ae6d53517b74bf84a33162397744b0/src/clj/clojure/core.clj#L5618C1-L5636C20">map-indexed version 1.2.0</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/blosavio/speculoos/blob/main/src/speculoos/collection_functions.clj#L74">view source</a></div></div><div class="public anchor" id="var-reduce-2"><h3>reduce-2</h3><div class="usage"><code>(reduce-2 f coll)</code><code>(reduce-2 f val coll)</code></div><div class="doc"><div class="markdown"><p>Reduce elements of <code>coll</code> by applying function <code>f</code>, with optional initial value <code>val</code>. <code>coll</code> may any Clojure collection.</p>
<p>Consult <a href="https://clojure.github.io/clojure/clojure.core-api.html#clojure.core/reduce">clojure.core/reduce</a> docstring for usage.</p>
<p>Examples:</p>
<pre><code class="language-clojure">(reduce-2 + [1 2 3]) ;; =&gt; 6
(reduce-2 #(conj %1 %2) {:a 1 :b 2 :c 3}) ;; =&gt; [:a 1 [:b 2] [:c 3]]
(reduce-2 * (list 3 4 5)) ;; =&gt; 60
(reduce-2 #(conj %1 %2) [] #{:x :y :z}) ;; =&gt; [:y :z :x]
(reduce-2 #(%2 %1) 99 (take 3 (cycle [inc dec inc]))) ;; =&gt; 100

(reduce-2 + []) ;; =&gt; 0
(reduce-2 + [] []) ;; =&gt; []
</code></pre>
<p>Modifications of <a href="https://github.com/clojure/clojure/blob/5293929c99c7e1b1b3bcdea3d451108c5774b3d1/src/clj/clojure/core.clj#L646">reduce version 1.1.0</a>.</p>
</div></div><div class="src-link"><a href="https://github.com/blosavio/speculoos/blob/main/src/speculoos/collection_functions.clj#L11">view source</a></div></div><div class="public anchor" id="var-reduce-indexed"><h3>reduce-indexed</h3><div class="usage"><code>(reduce-indexed f coll)</code><code>(reduce-indexed f val coll)</code></div><div class="doc"><div class="markdown"><p>Systematically apply <code>f</code> to elements of <code>coll</code>, analogous to <a href="speculoos.collection-functions.html#var-map-indexed-2">map-indexed-2</a>. Function <code>f</code> should be a function of 3 arguments: index, the accumulating value, and the next element of <code>coll</code>. <code>coll</code> may be any Clojure collection.</p>
<p>If <code>val</code> is not supplied:</p>
<ul>
<li><code>reduce-indexed</code> returns the result of applying <code>f</code> to the first 2 items coll, then applying <code>f</code> to that result and the 3rd item, etc.</li>
<li>If <code>coll</code> contains no items, <code>f</code> must accept no arguments as well, and <code>reduce-indexed</code> returns the result of calling <code>f</code> with no arguments.</li>
<li>If <code>coll</code> has only 1 item, it is returned and <code>f</code> is not called.</li>
</ul>
<p>If <code>val</code> is supplied:</p>
<ul>
<li><code>reduce-indexed</code> returns the result of applying <code>f</code> to <code>val</code> and the first item in <code>coll</code>, then applying <code>f</code> to that result and the 2nd item, etc.</li>
<li>If <code>coll</code> contains no items, returns <code>val</code> and <code>f</code> is not called.</li>
</ul>
<p>Hash/array-map elements are peeled off as <code>clojure.lang.MapEntry</code>, a pseudo vector of <code>[:key :value]</code>.</p>
<p>Set elements are consumed in an un-defined order.</p>
<p>Examples:</p>
<pre><code class="language-clojure">(reduce-indexed #(conj %2 (vector %1 %3)) [:initial] [:item1 :item2 :item3])
;; =&gt; [:initial [0 :item1] [1 :item2] [2 :item3]]

(reduce-indexed #(assoc %2 %3 %1) {:init-val 99} [:a :b :c])
;; =&gt; {:init-val 99, :a 0, :b 1, :c 2}
</code></pre>
<p>Note: This version does not involve lazy seqs nor chunking, so performance could be possibly pathological.</p>
</div></div><div class="src-link"><a href="https://github.com/blosavio/speculoos/blob/main/src/speculoos/collection_functions.clj#L105">view source</a></div></div></div></body></html>